<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Egbert Amoncio - Academic Portfolio</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'MS Sans Serif', Arial, sans-serif;
            overflow: auto;
            background: linear-gradient(to bottom, #0080c0 0%, #80d0ff 50%, #ffffff 100%);
            background-attachment: fixed;
            margin: 0;
            padding: 0;
            height: 100vh;
        }

        #ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .window {
            position: absolute;
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            pointer-events: all;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100vh - 42px) !important;
            max-width: 100% !important;
            max-height: calc(100vh - 42px) !important;
            transform: none !important;
        }

        .window.minimized {
            display: none;
        }

        .title-bar {
            background: linear-gradient(to right, #000080, #1084d0);
            color: white;
            padding: 4px 8px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .window-controls {
            display: flex;
            gap: 2px;
        }

        .window-btn {
            width: 16px;
            height: 14px;
            background: #c0c0c0;
            border: 1px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: #000;
        }

        .window-btn:active {
            border-color: #000000 #ffffff #ffffff #000000;
        }

        .window-btn:hover {
            background: #d4d4d4;
        }

        .close-btn {
            background: #c0c0c0;
        }

        .window-content {
            padding: 20px;
            background: white;
            color: #000;
        }

        .window.maximized .window-content {
            padding: 40px;
            line-height: 1.8;
        }

        .folder-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .folder-icon {
            width: 80px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 5px;
        }

        .folder-icon:hover {
            background: rgba(0, 0, 128, 0.1);
        }

        .folder-icon img {
            width: 48px;
            height: 48px;
            margin-bottom: 5px;
        }

        .folder-icon span {
            font-size: 12px;
            color: #000;
            word-wrap: break-word;
        }

        .folder-window {
            position: fixed;
            top: 20%;
            left: 30%;
            width: 600px;
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 100;
        }

        .folder-window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100vh - 42px) !important;
        }

        .folder-window.minimized {
            display: none;
        }

        .folder-content {
            background: white;
            padding: 10px;
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
        }

        .file-list {
            display: flex;
            flex-direction: column;
        }

        .file-item {
            display: flex;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px solid #e0e0e0;
            gap: 10px;
        }

        .file-item:hover {
            background: #e8e8ff;
        }

        .file-item.selected {
            background: #000080;
            color: white;
        }

        .file-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .file-name {
            flex-grow: 1;
            font-size: 14px;
        }

        .file-info {
            display: flex;
            gap: 30px;
            font-size: 12px;
            color: #666;
        }

        .file-item.selected .file-info {
            color: #ccc;
        }

        .pdf-viewer {
            position: fixed;
            top: 10%;
            left: 25%;
            width: 50%;
            height: 70%;
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 150;
        }

        .pdf-viewer.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100vh - 42px) !important;
        }

        .pdf-viewer.minimized {
            display: none;
        }

        .pdf-content {
            background: white;
            height: calc(100% - 30px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: auto;
        }

        .button {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            padding: 8px 20px;
            cursor: pointer;
            font-family: 'MS Sans Serif', Arial, sans-serif;
            font-size: 14px;
            margin: 5px;
            display: inline-block;
            pointer-events: all;
        }

        .button:active {
            border-color: #000000 #ffffff #ffffff #000000;
        }

        .button:hover {
            background: #d4d4d4;
        }

        .game-icons {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: all;
        }

        .game-icon {
            width: 64px;
            height: 64px;
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            padding: 5px;
        }

        .game-icon:hover {
            background: #d4d4d4;
        }

        .game-icon:active {
            border-color: #000000 #ffffff #ffffff #000000;
        }

        .game-icon span {
            font-size: 10px;
            margin-top: 2px;
        }

        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            display: flex;
            align-items: center;
            padding: 0 4px;
            z-index: 1001;
        }

        .taskbar-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .taskbar-windows {
            display: flex;
            gap: 4px;
            margin-left: 10px;
        }

        .taskbar-window {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #000000 #ffffff #ffffff #000000;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 12px;
            max-width: 150px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .taskbar-window.active {
            background: #ffffff;
            border-color: #000000 #ffffff #ffffff #000000;
        }

        .start-button {
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            padding: 4px 8px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .start-button:active {
            border-color: #000000 #ffffff #ffffff #000000;
        }

        .start-button:hover {
            background: #d4d4d4;
        }

        .start-menu {
            position: fixed;
            bottom: 42px;
            left: 4px;
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            width: 200px;
            display: none;
            z-index: 1002;
        }

        .start-menu.open {
            display: block;
        }

        .start-menu-item {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #808080;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .start-menu-item:hover {
            background: #000080;
            color: white;
        }

        .start-menu-header {
            background: linear-gradient(to right, #000080, #1084d0);
            color: white;
            padding: 4px 8px;
            font-weight: bold;
            font-size: 18px;
        }

        .game-window {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #000000 #000000 #ffffff;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }

        .game-window.active {
            display: block;
        }

        .game-canvas {
            background: white;
            display: block;
        }

        h2 {
            color: #000080;
            margin-bottom: 15px;
        }

        h3 {
            color: #000080;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p {
            margin-bottom: 10px;
            line-height: 1.4;
        }

        ul {
            margin-left: 20px;
        }

        li {
            margin-bottom: 5px;
        }

        a {
            color: #0000ff;
        }

        .close-btn {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        // Portfolio Configuration
        const PORTFOLIO_CONFIG = {
            name: "Egbert Amoncio",
            email: "amoncio.egbert@its.uni-frankfurt.de",
            position: "Researcher at Goethe University Frankfurt",
            about: {
                greeting: "About Me",
                intro: "I am a researcher at Goethe University Frankfurt specializing in Experimental Economics and Behavioral Economics.",
                description: "My research interests include experimental economics, behavioral finance, and decision-making under uncertainty. I am particularly interested in how cognitive biases affect economic decisions.",
                education: "I received my PhD in Economics from Goethe University Frankfurt."
            },
            teaching: {
                bachelors: [
                    "Microeconomics I",
                    "Experimental Economics", 
                    "Introduction to Behavioral Economics"
                ],
                masters: [
                    "Advanced Experimental Methods",
                    "Behavioral Finance",
                    "Topics in Applied Microeconomics"
                ],
                phd: [
                    "Research Seminar in Experimental Economics",
                    "Advanced Topics in Decision Theory"
                ]
            },
            research: {
                workingPapers: [
                    "BeyondPrettyFace.pdf - Beauty Premium in the Labor Market",
                    "FutureUnderGlass.pdf - Intertemporal Choice and Technology",
                    "Maori_TK.pdf - Traditional Knowledge and Economic Development",
                    "WhyLanguageMatters.pdf - Language Effects on Economic Decision Making"
                ],
                publications: [
                    {
                        text: "CVforRP.pdf - Curriculum Vitae for Research Positions",
                        link: ""
                    },
                    {
                        text: "DigitalPlatformsGeogDist.pdf - Digital Platforms and Geographic Distribution",
                        link: ""
                    },
                    {
                        text: "DistributedProductivities - Productivity in Distributed Teams",
                        link: ""
                    },
                    {
                        text: "EntrepreneurshipTraining.pdf - Impact of Entrepreneurship Training Programs",
                        link: ""
                    }
                ],
                workInProgress: [
                    "Trust and Cooperation in Virtual Teams",
                    "The Role of Social Networks in Economic Decisions", 
                    "Cognitive Load and Financial Decision Making"
                ]
            }
        };

        // Tetris Game Component
        function TetrisGame({ onClose }) {
            const canvasRef = React.useRef(null);
            const [score, setScore] = React.useState(0);
            const [gameOver, setGameOver] = React.useState(false);
            
            React.useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                
                const COLS = 10;
                const ROWS = 20;
                const BLOCK_SIZE = 20;
                
                let board = Array(ROWS).fill().map(() => Array(COLS).fill(0));
                let currentPiece = null;
                let currentX = 0;
                let currentY = 0;
                
                const pieces = [
                    [[1,1,1,1]], // I
                    [[1,1],[1,1]], // O
                    [[0,1,0],[1,1,1]], // T
                    [[1,1,0],[0,1,1]], // Z
                    [[0,1,1],[1,1,0]], // S
                    [[1,0,0],[1,1,1]], // L
                    [[0,0,1],[1,1,1]]  // J
                ];
                
                const colors = ['cyan', 'yellow', 'purple', 'red', 'green', 'orange', 'blue'];
                
                function newPiece() {
                    const pieceIndex = Math.floor(Math.random() * pieces.length);
                    currentPiece = pieces[pieceIndex].map(row => [...row]);
                    currentX = Math.floor((COLS - currentPiece[0].length) / 2);
                    currentY = 0;
                    
                    if (collision()) {
                        setGameOver(true);
                    }
                }
                
                function collision() {
                    for (let y = 0; y < currentPiece.length; y++) {
                        for (let x = 0; x < currentPiece[y].length; x++) {
                            if (currentPiece[y][x]) {
                                const newY = currentY + y;
                                const newX = currentX + x;
                                
                                if (newX < 0 || newX >= COLS || newY >= ROWS) {
                                    return true;
                                }
                                
                                if (newY >= 0 && board[newY][newX]) {
                                    return true;
                                }
                            }
                        }
                    }
                    return false;
                }
                
                function merge() {
                    for (let y = 0; y < currentPiece.length; y++) {
                        for (let x = 0; x < currentPiece[y].length; x++) {
                            if (currentPiece[y][x]) {
                                board[currentY + y][currentX + x] = 1;
                            }
                        }
                    }
                }
                
                function clearLines() {
                    let linesCleared = 0;
                    for (let y = ROWS - 1; y >= 0; y--) {
                        if (board[y].every(cell => cell)) {
                            board.splice(y, 1);
                            board.unshift(Array(COLS).fill(0));
                            linesCleared++;
                            y++;
                        }
                    }
                    if (linesCleared > 0) {
                        setScore(prev => prev + linesCleared * 100);
                    }
                }
                
                function drop() {
                    currentY++;
                    if (collision()) {
                        currentY--;
                        merge();
                        clearLines();
                        newPiece();
                    }
                }
                
                function moveLeft() {
                    currentX--;
                    if (collision()) currentX++;
                }
                
                function moveRight() {
                    currentX++;
                    if (collision()) currentX--;
                }
                
                function rotate() {
                    const rotated = currentPiece[0].map((_, i) =>
                        currentPiece.map(row => row[i]).reverse()
                    );
                    const prevPiece = currentPiece;
                    currentPiece = rotated;
                    if (collision()) {
                        currentPiece = prevPiece;
                    }
                }
                
                function draw() {
                    ctx.fillStyle = '#000';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    
                    // Draw board
                    for (let y = 0; y < ROWS; y++) {
                        for (let x = 0; x < COLS; x++) {
                            if (board[y][x]) {
                                ctx.fillStyle = '#888';
                                ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE - 1, BLOCK_SIZE - 1);
                            }
                        }
                    }
                    
                    // Draw current piece
                    if (currentPiece) {
                        ctx.fillStyle = '#f00';
                        for (let y = 0; y < currentPiece.length; y++) {
                            for (let x = 0; x < currentPiece[y].length; x++) {
                                if (currentPiece[y][x]) {
                                    ctx.fillRect(
                                        (currentX + x) * BLOCK_SIZE,
                                        (currentY + y) * BLOCK_SIZE,
                                        BLOCK_SIZE - 1,
                                        BLOCK_SIZE - 1
                                    );
                                }
                            }
                        }
                    }
                }
                
                function handleKeyPress(e) {
                    if (gameOver) {
                        if (e.key.toLowerCase() === 'x') {
                            onClose();
                        }
                        return;
                    }
                    
                    switch(e.key) {
                        case 'ArrowLeft':
                            moveLeft();
                            break;
                        case 'ArrowRight':
                            moveRight();
                            break;
                        case 'ArrowDown':
                            drop();
                            break;
                        case 'ArrowUp':
                            rotate();
                            break;
                    }
                    draw();
                }
                
                window.addEventListener('keydown', handleKeyPress);
                
                newPiece();
                const gameLoop = setInterval(() => {
                    if (!gameOver) {
                        drop();
                        draw();
                    }
                }, 500);
                
                return () => {
                    window.removeEventListener('keydown', handleKeyPress);
                    clearInterval(gameLoop);
                };
            }, [gameOver]);
            
            return (
                <div>
                    <div style={{ marginBottom: '10px', fontWeight: 'bold' }}>
                        Score: {score}
                    </div>
                    <canvas 
                        ref={canvasRef} 
                        width="200" 
                        height="400"
                        className="game-canvas"
                    />
                    {gameOver && (
                        <div style={{ marginTop: '10px', color: 'red', fontWeight: 'bold' }}>
                            Game Over! Press X to close and try again.
                        </div>
                    )}
                    <div style={{ marginTop: '10px', fontSize: '12px' }}>
                        Arrow Keys: Move/Rotate, Down: Drop
                    </div>
                </div>
            );
        }

        // Snake Game Component
        function SnakeGame({ onClose }) {
            const canvasRef = React.useRef(null);
            const [score, setScore] = React.useState(0);
            const [gameOver, setGameOver] = React.useState(false);

            React.useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                const gridSize = 20;
                const tileCount = canvas.width / gridSize;

                let snake = [
                    {x: 10, y: 10}
                ];
                let direction = {x: 0, y: 0};
                let food = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount)
                };

                function drawGame() {
                    // Clear canvas
                    ctx.fillStyle = 'black';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    // Draw snake
                    ctx.fillStyle = 'lime';
                    snake.forEach(segment => {
                        ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);
                    });

                    // Draw food
                    ctx.fillStyle = 'red';
                    ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize - 2, gridSize - 2);
                }

                function update() {
                    // Move snake head
                    const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

                    // Check wall collision
                    if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                        setGameOver(true);
                        return;
                    }

                    // Check self collision
                    for (let segment of snake) {
                        if (head.x === segment.x && head.y === segment.y) {
                            setGameOver(true);
                            return;
                        }
                    }

                    snake.unshift(head);

                    // Check food collision
                    if (head.x === food.x && head.y === food.y) {
                        setScore(prev => prev + 10);
                        food = {
                            x: Math.floor(Math.random() * tileCount),
                            y: Math.floor(Math.random() * tileCount)
                        };
                    } else {
                        snake.pop();
                    }

                    drawGame();
                }

                function handleKeyPress(e) {
                    if (gameOver) {
                        if (e.key.toLowerCase() === 'x') {
                            onClose();
                        }
                        return;
                    }

                    switch(e.key) {
                        case 'ArrowUp':
                            if (direction.y === 0) {
                                direction = {x: 0, y: -1};
                            }
                            break;
                        case 'ArrowDown':
                            if (direction.y === 0) {
                                direction = {x: 0, y: 1};
                            }
                            break;
                        case 'ArrowLeft':
                            if (direction.x === 0) {
                                direction = {x: -1, y: 0};
                            }
                            break;
                        case 'ArrowRight':
                            if (direction.x === 0) {
                                direction = {x: 1, y: 0};
                            }
                            break;
                    }
                }

                window.addEventListener('keydown', handleKeyPress);
                const gameLoop = setInterval(() => {
                    if (!gameOver) {
                        update();
                    }
                }, 150);

                drawGame();

                return () => {
                    window.removeEventListener('keydown', handleKeyPress);
                    clearInterval(gameLoop);
                };
            }, [gameOver]);

            return (
                <div>
                    <div style={{ marginBottom: '10px', fontWeight: 'bold' }}>
                        Score: {score}
                    </div>
                    <canvas 
                        ref={canvasRef} 
                        width="400" 
                        height="400"
                        className="game-canvas"
                    />
                    {gameOver && (
                        <div style={{ marginTop: '10px', color: 'red', fontWeight: 'bold' }}>
                            Game Over! Press X to close and try again.
                        </div>
                    )}
                    <div style={{ marginTop: '10px', fontSize: '12px' }}>
                        Arrow Keys to Move
                    </div>
                </div>
            );
        }

        // Main App Component
        function App() {
            const [currentPage, setCurrentPage] = useState('home');
            const [activeGame, setActiveGame] = useState(null);
            const [startMenuOpen, setStartMenuOpen] = useState(false);
            const [showMainWindow, setShowMainWindow] = useState(true);
            const [mainWindowState, setMainWindowState] = useState('normal'); // normal, maximized, minimized
            const [openFolders, setOpenFolders] = useState([]);
            const [openPDFs, setOpenPDFs] = useState([]);
            const [minimizedWindows, setMinimizedWindows] = useState([]);

            const workingPapers = [
                { name: "BeyondPrettyFace.pdf", lastModified: "32 minutes ago", size: "1.2 MB" },
                { name: "FutureUnderGlass.pdf", lastModified: "32 minutes ago", size: "980 KB" },
                { name: "Maori_TK.pdf", lastModified: "32 minutes ago", size: "1.5 MB" },
                { name: "WhyLanguageMatters.pdf", lastModified: "32 minutes ago", size: "2.1 MB" }
            ];

            const publishedPapers = [
                { name: "CVforRP.pdf", lastModified: "47 minutes ago", size: "450 KB" },
                { name: "DigitalPlatformsGeogDist.pdf", lastModified: "11 minutes ago", size: "3.2 MB" },
                { name: "DistributedProductivities", lastModified: "now", size: "2.8 MB" },
                { name: "EntrepreneurshipTraining.pdf", lastModified: "47 minutes ago", size: "1.9 MB" }
            ];

            const handleMenuClick = (page) => {
                setCurrentPage(page);
                setStartMenuOpen(false);
                setShowMainWindow(true);
                setMainWindowState('normal');
                // Remove from minimized if it was there
                setMinimizedWindows(prev => prev.filter(w => w.id !== 'main'));
            };

            const toggleMainWindowState = (state) => {
                if (state === 'minimize') {
                    setMainWindowState('minimized');
                    setMinimizedWindows(prev => [...prev, { id: 'main', title: 'Academic Portfolio' }]);
                } else if (state === 'maximize') {
                    setMainWindowState(mainWindowState === 'maximized' ? 'normal' : 'maximized');
                } else if (state === 'close') {
                    setShowMainWindow(false);
                    setMinimizedWindows(prev => prev.filter(w => w.id !== 'main'));
                }
            };

            const openFolder = (folderName) => {
                setOpenFolders(prev => [...prev, {
                    id: Date.now(),
                    name: folderName,
                    state: 'normal'
                }]);
            };

            const closeFolder = (folderId) => {
                setOpenFolders(prev => prev.filter(f => f.id !== folderId));
                setMinimizedWindows(prev => prev.filter(w => w.id !== `folder-${folderId}`));
            };

            const toggleFolderState = (folderId, state) => {
                if (state === 'minimize') {
                    setOpenFolders(prev => prev.map(f => 
                        f.id === folderId ? { ...f, state: 'minimized' } : f
                    ));
                    const folder = openFolders.find(f => f.id === folderId);
                    setMinimizedWindows(prev => [...prev, { 
                        id: `folder-${folderId}`, 
                        title: folder.name 
                    }]);
                } else if (state === 'maximize') {
                    setOpenFolders(prev => prev.map(f => 
                        f.id === folderId 
                            ? { ...f, state: f.state === 'maximized' ? 'normal' : 'maximized' }
                            : f
                    ));
                }
            };

            const openPDF = (pdfName, fromFolder) => {
                setOpenPDFs(prev => [...prev, {
                    id: Date.now(),
                    name: pdfName,
                    folder: fromFolder,
                    state: 'normal'
                }]);
            };

            const closePDF = (pdfId) => {
                setOpenPDFs(prev => prev.filter(p => p.id !== pdfId));
                setMinimizedWindows(prev => prev.filter(w => w.id !== `pdf-${pdfId}`));
            };

            const togglePDFState = (pdfId, state) => {
                if (state === 'minimize') {
                    setOpenPDFs(prev => prev.map(p => 
                        p.id === pdfId ? { ...p, state: 'minimized' } : p
                    ));
                    const pdf = openPDFs.find(p => p.id === pdfId);
                    setMinimizedWindows(prev => [...prev, { 
                        id: `pdf-${pdfId}`, 
                        title: pdf.name 
                    }]);
                } else if (state === 'maximize') {
                    setOpenPDFs(prev => prev.map(p => 
                        p.id === pdfId 
                            ? { ...p, state: p.state === 'maximized' ? 'normal' : 'maximized' }
                            : p
                    ));
                }
            };

            const restoreWindow = (windowId) => {
                if (windowId === 'main') {
                    setMainWindowState('normal');
                } else if (windowId.startsWith('folder-')) {
                    const folderId = parseInt(windowId.replace('folder-', ''));
                    setOpenFolders(prev => prev.map(f => 
                        f.id === folderId ? { ...f, state: 'normal' } : f
                    ));
                } else if (windowId.startsWith('pdf-')) {
                    const pdfId = parseInt(windowId.replace('pdf-', ''));
                    setOpenPDFs(prev => prev.map(p => 
                        p.id === pdfId ? { ...p, state: 'normal' } : p
                    ));
                }
                setMinimizedWindows(prev => prev.filter(w => w.id !== windowId));
            };

            const renderContent = () => {
                switch (currentPage) {
                    case 'home':
                        return (
                            <div>
                                <h2>{PORTFOLIO_CONFIG.name}</h2>
                                <p><strong>{PORTFOLIO_CONFIG.position}</strong></p>
                                <p>Email: <a href={`mailto:${PORTFOLIO_CONFIG.email}`}>{PORTFOLIO_CONFIG.email}</a></p>
                                <p>Welcome to my academic portfolio. Click the Start button or desktop folders to explore my research, teaching, and background.</p>
                            </div>
                        );

                    case 'about':
                        return (
                            <div>
                                <h2>{PORTFOLIO_CONFIG.about.greeting}</h2>
                                <p>{PORTFOLIO_CONFIG.about.intro}</p>
                                <p>{PORTFOLIO_CONFIG.about.description}</p>
                                <p>{PORTFOLIO_CONFIG.about.education}</p>
                            </div>
                        );

                    case 'teaching':
                        return (
                            <div>
                                <h2>Teaching</h2>
                                <h3>Bachelors</h3>
                                <ul>
                                    {PORTFOLIO_CONFIG.teaching.bachelors.map((course, idx) => (
                                        <li key={idx}>{course}</li>
                                    ))}
                                </ul>
                                <h3>Masters</h3>
                                <ul>
                                    {PORTFOLIO_CONFIG.teaching.masters.map((course, idx) => (
                                        <li key={idx}>{course}</li>
                                    ))}
                                </ul>
                                <h3>PhD</h3>
                                <ul>
                                    {PORTFOLIO_CONFIG.teaching.phd.map((course, idx) => (
                                        <li key={idx}>{course}</li>
                                    ))}
                                </ul>
                            </div>
                        );

                    case 'research':
                        return (
                            <div>
                                <h2>Research</h2>
                                
                                <div className="folder-container">
                                    <div className="folder-icon" onClick={() => openFolder('Working Papers')} title="Working Papers">
                                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect x="4" y="12" width="40" height="30" fill="#FFEB3B" stroke="#000" strokeWidth="1"/>
                                            <rect x="4" y="8" width="16" height="8" fill="#FDD835" stroke="#000" strokeWidth="1"/>
                                        </svg>
                                        <span>Working Papers</span>
                                    </div>
                                    
                                    <div className="folder-icon" onClick={() => openFolder('Published Papers')} title="Published Papers">
                                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <rect x="4" y="12" width="40" height="30" fill="#FFEB3B" stroke="#000" strokeWidth="1"/>
                                            <rect x="4" y="8" width="16" height="8" fill="#FDD835" stroke="#000" strokeWidth="1"/>
                                        </svg>
                                        <span>Published Papers</span>
                                    </div>
                                </div>

                                <h3>Work in Progress</h3>
                                <ul>
                                    {PORTFOLIO_CONFIG.research.workInProgress.map((work, idx) => (
                                        <li key={idx} style={{ marginBottom: '12px' }}>{work}</li>
                                    ))}
                                </ul>
                            </div>
                        );

                    default:
                        return null;
                }
            };

            return (
                <>
                    <div id="ui-overlay">
                        <div className="game-icons">
                            <div className="folder-icon" onClick={() => openFolder('Working Papers')} title="Working Papers">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="4" y="12" width="40" height="30" fill="#FFEB3B" stroke="#000" strokeWidth="1"/>
                                    <rect x="4" y="8" width="16" height="8" fill="#FDD835" stroke="#000" strokeWidth="1"/>
                                </svg>
                                <span>Working Papers</span>
                            </div>
                            
                            <div className="folder-icon" onClick={() => openFolder('Published Papers')} title="Published Papers">
                                <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="4" y="12" width="40" height="30" fill="#FFEB3B" stroke="#000" strokeWidth="1"/>
                                    <rect x="4" y="8" width="16" height="8" fill="#FDD835" stroke="#000" strokeWidth="1"/>
                                </svg>
                                <span>Publications</span>
                            </div>
                            
                            <div className="game-icon" onClick={() => setActiveGame('tetris')} title="Play Tetris">
                                🎮
                                <span>Tetris</span>
                            </div>
                            <div className="game-icon" onClick={() => setActiveGame('snake')} title="Play Snake">
                                🐍
                                <span>Snake</span>
                            </div>
                        </div>

                        {showMainWindow && (
                            <div className={`window ${mainWindowState}`} style={{ 
                                left: mainWindowState === 'maximized' ? '0' : '50%', 
                                top: mainWindowState === 'maximized' ? '0' : '50%', 
                                transform: mainWindowState === 'maximized' ? 'none' : 'translate(-50%, -50%)',
                                width: mainWindowState === 'maximized' ? '100%' : '600px'
                            }}>
                                <div className="title-bar">
                                    <span>💾 {PORTFOLIO_CONFIG.name} - Academic Portfolio</span>
                                    <div className="window-controls">
                                        <div className="window-btn" onClick={() => toggleMainWindowState('minimize')}>_</div>
                                        <div className="window-btn" onClick={() => toggleMainWindowState('maximize')}>□</div>
                                        <div className="window-btn close-btn" onClick={() => toggleMainWindowState('close')}>✕</div>
                                    </div>
                                </div>
                                <div className="window-content">
                                    {renderContent()}
                                </div>
                            </div>
                        )}

                        {/* Folder Windows */}
                        {openFolders.map(folder => (
                            <div key={folder.id} className={`folder-window ${folder.state}`}>
                                <div className="title-bar">
                                    <span>📁 {folder.name}</span>
                                    <div className="window-controls">
                                        <div className="window-btn" onClick={() => toggleFolderState(folder.id, 'minimize')}>_</div>
                                        <div className="window-btn" onClick={() => toggleFolderState(folder.id, 'maximize')}>□</div>
                                        <div className="window-btn close-btn" onClick={() => closeFolder(folder.id)}>✕</div>
                                    </div>
                                </div>
                                <div className="folder-content">
                                    <div className="file-list">
                                        {(folder.name === 'Working Papers' ? workingPapers : publishedPapers).map((file, idx) => (
                                            <div key={idx} className="file-item" onClick={() => openPDF(file.name, folder.name)}>
                                                <svg className="file-icon" viewBox="0 0 20 20" fill="none">
                                                    <rect x="3" y="2" width="14" height="16" fill="#FF5252" stroke="#000" strokeWidth="0.5"/>
                                                    <text x="10" y="12" fontSize="6" fill="white" textAnchor="middle">PDF</text>
                                                </svg>
                                                <span className="file-name">{file.name}</span>
                                                <div className="file-info">
                                                    <span>Add files via upload</span>
                                                    <span>{file.lastModified}</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        ))}

                        {/* PDF Viewer Windows */}
                        {openPDFs.map(pdf => (
                            <div key={pdf.id} className={`pdf-viewer ${pdf.state}`}>
                                <div className="title-bar">
                                    <span>📄 {pdf.name}</span>
                                    <div className="window-controls">
                                        <div className="window-btn" onClick={() => togglePDFState(pdf.id, 'minimize')}>_</div>
                                        <div className="window-btn" onClick={() => togglePDFState(pdf.id, 'maximize')}>□</div>
                                        <div className="window-btn close-btn" onClick={() => closePDF(pdf.id)}>✕</div>
                                    </div>
                                </div>
                                <div className="pdf-content">
                                    <div style={{ textAlign: 'center' }}>
                                        <svg width="100" height="100" viewBox="0 0 100 100" fill="none">
                                            <rect x="20" y="10" width="60" height="80" fill="#FF5252" stroke="#000" strokeWidth="2"/>
                                            <text x="50" y="50" fontSize="20" fill="white" textAnchor="middle">PDF</text>
                                        </svg>
                                        <h3 style={{ marginTop: '20px' }}>{pdf.name}</h3>
                                        <p style={{ marginTop: '10px', color: '#666' }}>
                                            PDF viewer would display here
                                        </p>
                                        <p style={{ marginTop: '10px', fontSize: '12px', color: '#999' }}>
                                            From: {pdf.folder}
                                        </p>
                                        <p style={{ marginTop: '20px' }}>
                                            <a href={`https://github.com/emamoncio/academic_website/tree/main/papers/${pdf.folder === 'Working Papers' ? 'working' : 'published'}/${pdf.name}`} 
                                               target="_blank" 
                                               rel="noopener noreferrer">
                                                View PDF on GitHub →
                                            </a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        ))}

                        {/* Game Windows */}
                        {activeGame === 'tetris' && (
                            <div className="game-window active">
                                <div className="title-bar">
                                    <span>🎮 Tetris</span>
                                    <div className="window-controls">
                                        <div className="window-btn close-btn" onClick={() => setActiveGame(null)}>✕</div>
                                    </div>
                                </div>
                                <div className="window-content">
                                    <TetrisGame onClose={() => setActiveGame(null)} />
                                </div>
                            </div>
                        )}

                        {activeGame === 'snake' && (
                            <div className="game-window active">
                                <div className="title-bar">
                                    <span>🐍 Snake</span>
                                    <div className="window-controls">
                                        <div className="window-btn close-btn" onClick={() => setActiveGame(null)}>✕</div>
                                    </div>
                                </div>
                                <div className="window-content">
                                    <SnakeGame onClose={() => setActiveGame(null)} />
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Taskbar */}
                    <div className="taskbar">
                        <div className="taskbar-left">
                            <div className="start-button" onClick={() => setStartMenuOpen(!startMenuOpen)}>
                                <span style={{ fontSize: '20px' }}>🪟</span>
                                <span>Start</span>
                            </div>
                        </div>
                        
                        <div className="taskbar-windows">
                            {minimizedWindows.map(window => (
                                <div 
                                    key={window.id} 
                                    className="taskbar-window"
                                    onClick={() => restoreWindow(window.id)}
                                >
                                    {window.title}
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Start Menu */}
                    <div className={`start-menu ${startMenuOpen ? 'open' : ''}`}>
                        <div className="start-menu-header">Egbert Amoncio</div>
                        <div className="start-menu-item" onClick={() => handleMenuClick('about')}>
                            <span>👤</span>
                            <span>About</span>
                        </div>
                        <div className="start-menu-item" onClick={() => handleMenuClick('research')}>
                            <span>🔬</span>
                            <span>Research</span>
                        </div>
                        <div className="start-menu-item" onClick={() => handleMenuClick('teaching')}>
                            <span>📚</span>
                            <span>Teaching</span>
                        </div>
                    </div>
                </>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
